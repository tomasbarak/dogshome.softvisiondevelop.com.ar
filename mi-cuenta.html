<!DOCTYPE html>
<html lang="en" style="height: 100%">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="images/DogsHomeLogo-ReDesign%20(Colorified&Final).png">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <script src="scripts/main/basic-navigation.js"></script>
    <script src="scripts/auth/sign-out.js"></script>
    <script src="scripts/auth/auth-state-listener.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="stylesheets/main/style-mainpage.css" rel="stylesheet">
    <link href="stylesheets/profile/profile-def-view.css" rel="stylesheet">
    <link href="stylesheets/publications/expandible-menu.css" rel="stylesheet">
    <link href="stylesheets/publications/publications-style.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&family=Prompt&display=swap" rel="stylesheet">
    <script src="scripts/profile/get-account-stats.js"></script>
    <link href="stylesheets/main/content-show.css" rel="stylesheet">
    <link href="stylesheets/main/drawer-navigator-style.css" rel="stylesheet">
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"></script>
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" id="theme-styles">
    <script src="scripts/alerts/page-alerts.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Mi perfil</title>

</head>
<body onload="">

<script src="scripts/main/loading-display.js"></script>
<div id="loading-visible">
    <lottie-player src="animations/dog-walking.json" background="transparent"  speed="1"  style="width: 200px; height: 200px;" loop autoplay></lottie-player>
</div>

<div id="search-bar">
    <div class="top-bar-section-cont" style="flex-direction: row; align-items: center;">
        <img src="images/DogsHomeLogo-ReDesign%20(White&Final).png" alt style="height: 50px; width: 50px; margin-right: 10px" class="">

        <a id="main-button" class="desktop-elements nav-buttons" onclick="window.location = 'index.html'">Inicio</a>
        <a id="alerts-button" class="desktop-elements nav-buttons" onclick="navigateToAlerts()">Alertas</a>
        <!-- <a id="refugios-button" class="desktop-elements nav-buttons" onclick="navigateToRefs()">Refugios</a>-->
    </div>
    <div class="top-bar-section-cont">
        <form id="search-form">
            <div id="search-input-container" style="width: 100%; height: 100%; max-width: 600px; flex-direction: row; display: flex; align-items: center; justify-content: center; background-color: white">
                <input type="text" id="search-input" aria-label="Buscar" placeholder="Buscar en DogsHome…" maxlength="120" autocapitalize="off" autocorrect="off" spellcheck="false" autocomplete="off" tabindex="3">
                <span class="material-icons-outlined" style="color: #d3d3d3; cursor: pointer; user-select: none" onclick="searchPost()">search</span>
            </div>
        </form>
    </div>
    <div class="top-bar-section-cont" id="userSpace" style="flex: 1; align-items: center; justify-content: flex-end;">
        <span class="material-icons-outlined" id="fav-button" style="color: #fff; cursor: pointer; margin: 0 10px; user-select: none;" onclick="expandMenu()">menu</span>
        <a class="desktop-elements nav-buttons" id="profile-name" style="margin-right: 0; padding-right: 10px" onclick="navigateToProfile()"></a>
        <img class="desktop-elements" id="profile-pic" onclick="" src="animations/image-loading.gif" alt="profile pic" style="height: 40px; width: 40px; cursor: pointer; margin-right: 10px; user-select: none; border-radius: 80px; object-fit: cover">
    </div>
</div>
<div class="expandible-menu-invisible" id="expandible-menu">
    <div class="expandible-menu-option-cont" id="name-option-exp-menu">
        <img class="" id="profile-pic-exp-menu" src="animations/image-loading.gif" alt="profile pic"
             style="height: 55px; width: 55px; cursor: pointer; margin-right: 10px; user-select: none; border-radius: 80px; object-fit: cover">
        <a id="exp-menu-name"></a>
    </div>
    <ul class="exp-options-container">
        <li>
            <a href="index.html">
                <svg xmlns="http://www.w3.org/2000/svg"viewBox="0 0 24 24" width="24" fill="#333"
                     height="24">
                    <path fill-rule="evenodd"
                          d="M11.03 2.59a1.5 1.5 0 011.94 0l7.5 6.363a1.5 1.5 0 01.53 1.144V19.5a1.5 1.5 0 01-1.5 1.5h-5.75a.75.75 0 01-.75-.75V14h-2v6.25a.75.75 0 01-.75.75H4.5A1.5 1.5 0 013 19.5v-9.403c0-.44.194-.859.53-1.144l7.5-6.363zM12 3.734l-7.5 6.363V19.5h5v-6.25a.75.75 0 01.75-.75h3.5a.75.75 0 01.75.75v6.25h5v-9.403L12 3.734z"></path>
                </svg>
                <span>Inicio</span>
            </a>
        </li>
        <li>
            <a href="alertas.html">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#333" width="24" height="24">
                    <path d="M12 13.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path>
                    <path fill-rule="evenodd"
                          d="M19.071 3.429C15.166-.476 8.834-.476 4.93 3.429c-3.905 3.905-3.905 10.237 0 14.142l.028.028 5.375 5.375a2.359 2.359 0 003.336 0l5.403-5.403c3.905-3.905 3.905-10.237 0-14.142zM5.99 4.489A8.5 8.5 0 0118.01 16.51l-5.403 5.404a.859.859 0 01-1.214 0l-5.378-5.378-.002-.002-.023-.024a8.5 8.5 0 010-12.02z"></path>
                </svg>
                <span>Alertas</span>
            </a>
        </li>
        <li>
            <a href="favoritos.html">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#333" width="24" height="24">
                    <path fill-rule="evenodd"
                          d="M6.736 4C4.657 4 2.5 5.88 2.5 8.514c0 3.107 2.324 5.96 4.861 8.12a29.66 29.66 0 004.566 3.175l.073.041.073-.04c.271-.153.661-.38 1.13-.674.94-.588 2.19-1.441 3.436-2.502 2.537-2.16 4.861-5.013 4.861-8.12C21.5 5.88 19.343 4 17.264 4c-2.106 0-3.801 1.389-4.553 3.643a.75.75 0 01-1.422 0C10.537 5.389 8.841 4 6.736 4zM12 20.703l.343.667a.75.75 0 01-.686 0l.343-.667zM1 8.513C1 5.053 3.829 2.5 6.736 2.5 9.03 2.5 10.881 3.726 12 5.605 13.12 3.726 14.97 2.5 17.264 2.5 20.17 2.5 23 5.052 23 8.514c0 3.818-2.801 7.06-5.389 9.262a31.146 31.146 0 01-5.233 3.576l-.025.013-.007.003-.002.001-.344-.666-.343.667-.003-.002-.007-.003-.025-.013A29.308 29.308 0 0110 20.408a31.147 31.147 0 01-3.611-2.632C3.8 15.573 1 12.332 1 8.514z"></path>
                </svg>
                <span>Favoritos</span>
            </a>
        </li>
        <li>
            <a href="mi-cuenta.html">
                <svg xmlns="http://www.w3.org/2000/svg" class="selected" viewBox="0 0 24 24" fill="#333" width="24" height="24">
                    <path fill-rule="evenodd"
                          d="M12 2.5a5.5 5.5 0 00-3.096 10.047 9.005 9.005 0 00-5.9 8.18.75.75 0 001.5.045 7.5 7.5 0 0114.993 0 .75.75 0 101.499-.044 9.005 9.005 0 00-5.9-8.181A5.5 5.5 0 0012 2.5zM8 8a4 4 0 118 0 4 4 0 01-8 0z"></path>
                </svg>
                <span  class="selected" >Mi perfil</span>
            </a>
        </li>
        <li>
            <a onclick="showSignOutAlert()" style="cursor: pointer">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#ff0000" width="24" height="24">
                    <path fill-rule="evenodd"
                          d="M3 3.25c0-.966.784-1.75 1.75-1.75h5.5a.75.75 0 010 1.5h-5.5a.25.25 0 00-.25.25v17.5c0 .138.112.25.25.25h5.5a.75.75 0 010 1.5h-5.5A1.75 1.75 0 013 20.75V3.25zm16.006 9.5l-3.3 3.484a.75.75 0 001.088 1.032l4.5-4.75a.75.75 0 000-1.032l-4.5-4.75a.75.75 0 00-1.088 1.032l3.3 3.484H10.75a.75.75 0 000 1.5h8.256z"></path>
                </svg>
                <span style="color: #ff0000">Cerrar sesión</span>
            </a>
        </li>
    </ul>
</div>

<div id="profile-view-cont">
    <div id="profile-view-stats" class="desktop">
        <img src="animations/image-loading.gif" alt id="profile-view-image">

        <div id="profile-stats-cont">
            <div style="display: flex; height: 100%; align-items: center; justify-content: flex-start; width: calc(50% - 100px)">
                <div style="display: flex; flex-direction: column-reverse; margin-right: 50px;">
                    <a style="font-size: 12px; color: #079292">Seguidores</a>
                    <a id="profile-followers" class="stats-content">123</a>
                </div>
                <div style="display: flex; flex-direction: column-reverse">
                    <a style="font-size: 12px; color: #079292">Siguiendo</a>
                    <a id="profile-following" class="stats-content">50</a>
                </div>
                <div style="display: flex; flex-direction: column-reverse; margin-left: 50px;">
                    <a style="font-size: 12px; color: #079292">Publicaciones</a>
                    <a id="profile-posts" class="stats-content">30</a>
                </div>
            </div>
            <div style="width: 200px; display: flex; align-items: center; justify-content: center"></div>
            <div style="width: calc(50% - 100px); height: 100%; display: flex; align-items: center; justify-content: center">
                <div onclick="showSignOutAlert()" class="profile-action-button">
                    <a>Cerrar sesión</a>
                </div>
            </div>
        </div>
    </div>

    <div id="profile-view-cont-mobile" class="mobile">
        <div id="profile-stats-cont-mobile">
            <div id="first-stats-part-cont-mobile">
                <img src="animations/image-loading.gif" alt id="profile-image-mobile">

                <div id="account-stats-cont-mobile" >
                        <div class="stats-content-mobile">
                            <a id="profile-followers-mobile">0</a>
                            <a style="font-size: 12px; color: #079292">Seguidores</a>
                        </div>
                        <div class="stats-content-mobile">
                            <a id="profile-following-mobile">0</a>
                            <a style="font-size: 12px; color: #079292">Siguiendo</a>
                        </div>
                        <div class="stats-content-mobile">
                            <a id="profile-posts-mobile">0</a>
                            <a style="font-size: 12px; color: #079292">Publicaciones</a>
                        </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://dogshome-6af88.web.app/__/firebase/8.6.5/firebase-app.js"></script>

<!-- Add Firebase products that you want to use -->
<script src="https://dogshome-6af88.web.app/__/firebase/8.6.5/firebase-auth.js"></script>
<script src="https://dogshome-6af88.web.app/__/firebase/8.6.5/firebase-database.js"></script>
<script src="https://dogshome-6af88.web.app/__/firebase/init.js"></script>
<script src="scripts/auth/sign-out.js"></script>
<script src="scripts/main/open-close-drawer.js"></script>
<script src="scripts/main/get-all-publications.js"></script>
<script src="scripts/main/add-publication.js"></script>
<script src="scripts/profile/profile-settings-functions.js"></script>
<script src="scripts/publications/expand-menu.js"></script>
<script src="https://dogshome-6af88.web.app/__/firebase/8.8.0/firebase-app-check.js"></script>

<script>
    var userDataName = localStorage.getItem('userDataName');
    var userDataSurname = localStorage.getItem('userDataSurname');
    var userDataImage = localStorage.getItem('userDataImage');

    if(userDataImage !== null){
        document.getElementById('profile-pic').src = userDataImage;
        document.getElementById('profile-pic-exp-menu').src = userDataImage;
        document.getElementById('profile-view-image').src = userDataImage;
    }
    if(userDataSurname !== null && userDataName !== null){
        //document.getElementById('profile-name').innerText = userDataName + ' ' + userDataSurname;
        document.getElementById('exp-menu-name').innerText = userDataName + ' ' + userDataSurname;
    }
</script>
<script>
    firebase.auth().onAuthStateChanged((user) => {
        if (user) {
            readUserData(user.uid);
            getAccountProfile(user.uid);
            // ...
        } else {
            window.location.href = "signin.html";
            // ...
        }
    });
</script>
</body>
</html>